# mitm-proxy

***Man-In-The-Middle*** сервер для проксирования HTTP и HTTPS запросов и выполнения сканирования на уязвимость command injection (аналогично части функционала Burp Suite)

## Общая функциональность
- Проксирование HTTP/HTTPS запросов.

- Сохранение проксированных запросов и ответов в базу данных (MongoDB).

- Повторная отправка ранее проксированных запросов.

- Сканирование запросов на уязвимости (например, Command Injection).

## Прокси-сервер 
Работает на `localhost:8080`

HTTPS соединение устанавливается на основе самоподписных сертификатов

## Веб-сервер
Работает на `localhost:8000`

### API:

`GET /requests` — список всех проксированных запросов

`GET /requests/{id}` — вывод деталей одного проксированного запроса

`POST /repeat/{id}` — повторная отправка проксированного запроса

`POST /scan/{id}` — сканирование запроса на уязвимость command injection

## Перед началом работы

Перед первым запуском необходимо сгенерировать корневой сертификат (CA):

```bash
chmod +x scripts/gen_ca.sh
./scripts/gen_ca.sh
```

Будут созданы файлы:
- `certs/ca.key` - Приватный ключ центра сертификации
- `certs/ca.crt` - Корневой сертификат
- `certs/cert.key` - Ключ для сертификатов доменов


Корневой самоподписный сертификат необходимо добавить в систему, для **Linux/macOS:**:
```bash
sudo cp certs/ca.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates
```

## Использование

### Команды Docker:
```bash
make docker-build  # Собрать образ
make docker-start  # Запустить контейнер
make docker-stop   # Остановить контейнер 
make docker-clean  # Удалить контейнер
```
